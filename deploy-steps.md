# 🚀 阿里云部署操作指南

## 准备工作 ✅
- [x] 项目代码已推送到GitHub
- [x] 阿里云账号已准备
- [x] 部署配置文件已创建

## 第一步：创建容器镜像仓库

### 1.1 访问容器镜像服务
🔗 点击：https://cr.console.aliyun.com/cn-hangzhou/instances

### 1.2 创建个人版实例（如果没有）
- 点击"创建个人版实例"
- 选择地域：华东1（杭州）
- 等待创建完成

### 1.3 创建命名空间
- 点击"命名空间" → "创建命名空间"
- 命名空间名称：`guitar-ai`
- 点击"确定"

### 1.4 创建镜像仓库
- 点击"镜像仓库" → "创建镜像仓库"
- 仓库名称：`guitar-tab-ai`
- 仓库类型：公开
- 摘要：吉他谱AI系统
- 点击"下一步"

### 1.5 配置代码源
- 代码源：GitHub
- 授权GitHub账号
- 仓库：选择 `Lfrangt/guitar-tab-agent`
- Dockerfile路径：`Dockerfile-cn`
- 镜像版本：`latest`
- 点击"创建镜像仓库"

### 1.6 触发构建
- 在仓库详情页点击"立即构建"
- 等待构建完成（约5-10分钟）
- 构建成功后记录镜像地址

## 第二步：创建函数计算应用

### 2.1 访问函数计算控制台
🔗 点击：https://fc.console.aliyun.com/

### 2.2 创建函数
- 点击"创建函数"
- 选择"容器镜像"
- 基本信息：
  - 函数名称：`guitar-tab-ai`
  - 描述：吉他谱AI系统

### 2.3 配置容器镜像
- 镜像地址：`registry.cn-hangzhou.aliyuncs.com/guitar-ai/guitar-tab-ai:latest`
- 端口：`8501`
- 启动命令：留空
- 参数：留空

### 2.4 配置函数设置
- 内存：`1024 MB`
- 超时时间：`300 秒`
- 实例并发度：`1`
- 点击"创建"

## 第三步：配置HTTP触发器

### 3.1 创建触发器
- 在函数详情页点击"触发器"
- 点击"创建触发器"
- 触发器类型：HTTP触发器
- 触发器名称：`http-trigger`
- 认证方式：`anonymous`
- 请求方法：勾选 `GET` 和 `POST`
- 点击"确定"

### 3.2 获取访问地址
- 触发器创建后会生成一个公网地址
- 复制这个地址，这就是你的应用访问地址！

## 第四步：测试应用

### 4.1 访问应用
- 在浏览器中打开触发器地址
- 应该能看到Streamlit应用界面

### 4.2 上传测试
- 上传一个音频/视频文件
- 测试吉他谱生成功能

## 🎯 完成！

恭喜！你的吉他谱AI应用现在已经部署在阿里云上，可以通过互联网访问了！

## 💡 提示
- 首次访问可能需要等待几秒钟（冷启动）
- 如果遇到问题，可以在函数计算控制台查看日志
- 可以随时更新GitHub代码，然后重新构建镜像

## 🔧 常见问题
1. **构建失败**：检查Dockerfile-cn路径是否正确
2. **函数启动失败**：检查端口是否设置为8501
3. **访问超时**：调整超时时间到300秒或更长